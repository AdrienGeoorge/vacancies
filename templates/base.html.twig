<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0">
    <meta name="robots" content="follow, index">
    <meta name="language" content="fr-FR"/>
    <meta name="Geography" content="France"/>
    <meta name="country" content="France"/>
    <meta name="hreflang" content="fr-FR"/>
    <meta name="Author" content="Adrien GEORGE"/>
    <meta name="Copyright" content="Adrien GEORGE"/>
    <title>{% block title %}{{ app_name }}{% endblock %}</title>
    <link rel="icon" href="{{ asset('build/images/index.ico') }}">
    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}
</head>
<body class="flex flex-col bg-body dark:bg-body-dark dark:text-white">
<div id="cookie-banner"
     class="fixed bottom-0 inset-x-0 bg-white dark:bg-box-dark border-t border-gray-300 dark:border-b-gray-300 p-4 shadow z-50 opacity-95 hidden">
    <div class="max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
        <p class="text-sm text-gray-700 dark:text-white">
            Ce site ne dépose aucun cookie autre que ceux nécessaires à son fonctionnement. Aucune donnée personnelle
            n’est collectée à des fins publicitaires ou statistiques. </p>
        <div class="flex gap-2">
            <button id="acceptCookies"
                    class="bg-slate-500 dark:bg-white text-white dark:text-body-dark px-3 py-1 rounded-2xl hover:bg-slate-700 dark:hover:bg-gray-200 text-sm">
                Fermer
            </button>
        </div>
    </div>
</div>
{% block body %}
    <div id="nav"
         class="w-full flex flex-col md:flex-row items-center justify-between gap-4 py-5 px-10">
        <a href="{{ path('app_home') }}"
           class="gap-4 items-center hidden md:flex bg-box dark:bg-box-dark rounded-full px-3 py-2">
            <img src="{{ asset('build/images/index.png') }}" alt="{{ app_name }}" width="38em">
        </a>

        <div class="flex flex-row gap-2">
            <div class="flex gap-3 bg-box dark:bg-box-dark rounded-full border dark:border-gray-600">
                <a href="{{ path('app_home') }}" class="tracking-wide w-40 py-3 rounded-full flex items-center
                        justify-center {{ app.request.get('_route') == 'app_home' ? 'bg-teal-500 text-white' }}
                        hover:bg-teal-600 hover:text-white">Mes voyages</a>
            </div>
            <a href="{{ path('trip_new') }}" class="flex tracking-wide bg-amber-50 text-black p-3 rounded-full
                                    border border-amber-300 items-center justify-center gap-1.5 hover:bg-amber-100
                                    transition-all duration-300 ease-in-out focus:shadow-outline focus:outline-none">
                <div class="rounded-full bg-amber-300 px-1 hidden md:block">+</div>
                Nouveau voyage
            </a>
        </div>

        <div class="flex flex-row gap-2 items-center">
            <div class="flex gap-3 bg-box dark:bg-box-dark rounded-full border dark:border-gray-600 w-12 h-12
                        justify-center items-center cursor-pointer show-user-notifications">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"></path>
                </svg>
            </div>
            <div class="rounded-full cursor-pointer show-user-menu">
                {% if app.user.avatar %}
                    <img src="{{ app.user.avatar }}" alt="Mon profil" class="w-12 h-12 rounded-full">
                {% else %}
                    <div class="w-12 h-12 flex items-center justify-center text-white text-2xl font-poppins rounded-full"
                         style="background-color: #495963;">
                        {{ app.user.firstname|first }}
                    </div>
                {% endif %}
            </div>
            <div class="absolute hidden user-menu left-1/2 -translate-x-1/2 top-36 md:translate-x-[unset] md:left-[unset] md:right-8 md:top-20 shadow rounded-3xl bg-box dark:bg-box-dark p-3 flex-col gap-2 z-20">
                <div class="flex flex-row gap-2 items-center">
                    {% if app.user.avatar %}
                        <img src="{{ app.user.avatar }}" alt="Mon profil" class="w-10 h-10 rounded-full">
                    {% else %}
                        <div class="w-10 h-10 flex items-center justify-center text-white text-2xl font-poppins rounded-full"
                             style="background-color: #495963;">
                            {{ app.user.firstname|first }}
                        </div>
                    {% endif %}
                    <a href="{{ path('user_profile') }}" class="tracking-wide w-fit py-3 px-5 rounded-2xl border-2
                                    bg-gray-700 text-white border-gray-500 hover:bg-gray-800
                                    dark:bg-white dark:text-gray-700 dark:border-gray-300 hover:dark:bg-gray-200
                                    flex items-center justify-center transition-all duration-300
                                    ease-in-out focus:shadow-outline focus:outline-none">Consulter mon profil</a>
                </div>
                <hr>
                <a href="#" class="tracking-wide w-full py-3 px-5 rounded-2xl border-2
                                    bg-gray-700 text-white border-gray-500 hover:bg-gray-800
                                    dark:bg-white dark:text-gray-700 dark:border-gray-300 hover:dark:bg-gray-200
                                    flex items-center justify-center transition-all duration-300
                                    ease-in-out focus:shadow-outline focus:outline-none"
                   onclick="alert('info', 'Modification des informations indisponible pour le moment')">
                    Modifier mes informations</a>
                <a href="{{ path('auth_logout') }}" class="tracking-wide bg-red-400 text-white w-full py-3 rounded-2xl border-2 border-red-200
                                    flex items-center justify-center hover:bg-red-600 transition-all duration-300
                                    ease-in-out focus:shadow-outline focus:outline-none">Déconnexion</a>
            </div>
            <div class="absolute hidden user-notifications left-1/2 -translate-x-1/2 top-36 md:translate-x-[unset] md:left-[unset] md:right-8 md:top-20 shadow rounded-3xl bg-box dark:bg-box-dark p-3 flex-col gap-2 z-30 w-96">
                <div class="text-lg font-roboto-medium text-center">Centre de notifications</div>
                {% if not notifications %}
                    <div class="text-sm text-center">Vous n'avez aucune notification non lue</div>
                {% else %}
                    {% for notification in notifications %}
                        <div class="notification w-full bg-notification border border-gray-200 rounded-xl dark:bg-notification-dark dark:border-notification-border-dark">
                            <a href="{{ notification.link ? notification.link : '#' }}" class="flex p-4 gap-2 flex-col">
                                <div class="body leading-4">
                                    {% if notification.notifiedBy %}
                                        <span class="font-roboto-medium">{{ notification.notifiedBy.completeName }}</span>
                                    {% endif %}
                                    <span>{{ notification.text }}</span>
                                </div>
                                <div class="text-sm font-bold">Il y a {{ notification.receivedAt|time_ago }}</div>
                            </a>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
    <div id="content" class="p-2 pb-8">
        {% include '_flashes.html.twig' %}
        {% block content %}{% endblock %}
    </div>
{% endblock %}
{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
{% endblock %}
</body>
</html>
